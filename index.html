<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Table Tennis Stats Tracker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üèì TT Stats</h1>
        </header>

        <!-- Game Setup Section -->
        <section id="game-setup" class="card">
            <h2>Game Setup</h2>
            <form id="setup-form">
                <div class="form-group">
                    <label for="opponent-id">Opponent:</label>
                    <input type="text" id="opponent-id" placeholder="A, B, C, D..." required>
                </div>
                <div class="form-group">
                    <label for="event">Event:</label>
                    <input type="text" id="event" placeholder="U1350, U1500..." required>
                </div>
                <div class="form-group">
                    <label for="game-number">Game #:</label>
                    <input type="number" id="game-number" placeholder="1, 2, 3..." min="1" required>
                </div>
                <button type="submit" class="btn btn-primary">Start Game</button>
                
                <div class="test-modes">
                    <h3>Test Modes (A, U1350)</h3>
                    <div class="test-buttons">
                        <button type="button" id="test-mode-1" class="btn btn-secondary">Game 1</button>
                        <button type="button" id="test-mode-2" class="btn btn-secondary">Game 2</button>
                        <button type="button" id="test-mode-3" class="btn btn-secondary">Game 3</button>
                        <button type="button" id="test-mode-4" class="btn btn-secondary">Game 4</button>
                    </div>
                </div>
            </form>
        </section>

        <!-- Questions Page -->
        <section id="questions-page" class="card hidden">
            <div class="page-header">
                <h2>Point Tracking</h2>
                <div class="game-info">
                    <p><strong>Opponent:</strong> <span id="current-opponent"></span></p>
                    <p><strong>Event:</strong> <span id="current-event"></span></p>
                    <p><strong>Game:</strong> <span id="current-game"></span></p>
                </div>
            </div>

            <!-- Score Display -->
            <div class="score-display">
                <div class="player-score">
                    <h3>You (X)</h3>
                    <div class="score" id="player-score">0</div>
                </div>
                <div class="vs">VS</div>
                <div class="opponent-score">
                    <h3>Opponent (Y)</h3>
                    <div class="score" id="opponent-score">0</div>
                </div>
            </div>

            <!-- Point Tracking Questions -->
            <div class="point-tracking">
                <!-- Question 1: Who won -->
                <div class="question-section">
                    <h3>1. Who won the point?</h3>
                    <div class="button-grid winner-buttons">
                        <button class="option-btn" data-winner="X">X (You)</button>
                        <button class="option-btn" data-winner="Y">Y (Opponent)</button>
                    </div>
                </div>

                <!-- Question 2: Reason -->
                <div id="reason-section" class="question-section">
                    <h3>2. Reason:</h3>
                    <div class="button-grid reason-buttons">
                        <button class="option-btn" data-reason="serve">Serve</button>
                        <button class="option-btn" data-reason="attack">Attack</button>
                        <button class="option-btn" data-reason="miss-net">Miss net</button>
                        <button class="option-btn" data-reason="miss-over">Miss over</button>
                        <button class="option-btn" data-reason="lucky">Lucky</button>
                    </div>
                </div>

                <!-- Question 3: Hit types -->
                <div id="hit-section" class="question-section">
                    <h3>3. Last hit:</h3>
                    <div class="hit-types">
                        <div class="hit-group">
                            <label>X (You):</label>
                            <div class="button-grid hit-buttons">
                                <button class="option-btn" data-hit="X" data-type="FH">X FH</button>
                                <button class="option-btn" data-hit="X" data-type="BH">X BH</button>
                            </div>
                        </div>
                        <div class="hit-group">
                            <label>Y (Opponent):</label>
                            <div class="button-grid hit-buttons">
                                <button class="option-btn" data-hit="Y" data-type="FH">Y FH</button>
                                <button class="option-btn" data-hit="Y" data-type="BH">Y BH</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button id="record-point" class="btn btn-success">Record Point</button>
                    <button id="export-data" class="btn btn-secondary">Export CSV</button>
                    <button id="view-stats" class="btn btn-primary">View Stats</button>
                </div>
            </div>

            <div class="game-controls">
                <button id="end-game" class="btn btn-danger">End Game</button>
                <button id="new-game" class="btn btn-secondary">New Game</button>
            </div>
        </section>

        <!-- Stats Page -->
        <section id="stats-page" class="card hidden">
            <div class="page-header">
                <h2>Live Statistics</h2>
                <button id="back-to-questions" class="btn btn-secondary">Back to Questions</button>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Score</h3>
                    <div class="stat-value">
                        <span id="live-player-score">0</span> - <span id="live-opponent-score">0</span>
                    </div>
                </div>
                
                <div class="stat-card">
                    <h3>Why You Won</h3>
                    <div class="stat-details">
                        <div class="stat-item">
                            <span>Attack:</span>
                            <span id="x-attack-pct">0%</span>
                        </div>
                        <div class="stat-item">
                            <span>Lucky:</span>
                            <span id="x-lucky-pct">0%</span>
                        </div>
                        <div class="stat-item">
                            <span>Y miss net:</span>
                            <span id="x-y-miss-net-pct">0%</span>
                        </div>
                        <div class="stat-item">
                            <span>Y miss over:</span>
                            <span id="x-y-miss-over-pct">0%</span>
                        </div>
                        <div class="stat-item">
                            <span>Serve:</span>
                            <span id="x-serve-pct">0%</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <h3>Why You Lost</h3>
                    <div class="stat-details">
                        <div class="stat-item">
                            <span>Y attack:</span>
                            <span id="y-attack-pct">0%</span>
                        </div>
                        <div class="stat-item">
                            <span>Y lucky:</span>
                            <span id="y-lucky-pct">0%</span>
                        </div>
                        <div class="stat-item">
                            <span>X miss net:</span>
                            <span id="y-x-miss-net-pct">0%</span>
                        </div>
                        <div class="stat-item">
                            <span>X miss over:</span>
                            <span id="y-x-miss-over-pct">0%</span>
                        </div>
                        <div class="stat-item">
                            <span>Y serve:</span>
                            <span id="y-serve-pct">0%</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <h3>Hit Distribution</h3>
                    <div class="stat-details">
                        <div class="stat-item">
                            <span>Y's FH when you won:</span>
                            <span id="y-fh-when-x-won-pct">0%</span>
                        </div>
                        <div class="stat-item">
                            <span>Y's BH when you won:</span>
                            <span id="y-bh-when-x-won-pct">0%</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <script src="script.js"></script>
</body>
</html>
